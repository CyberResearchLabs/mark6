\section{server.c File Reference}
\label{server_8c}\index{server.c@{server.c}}
{\tt \#include $<$assert.h$>$}\par
{\tt \#include $<$syslog.h$>$}\par
{\tt \#include $<$stdarg.h$>$}\par
{\tt \#include $<$pthread.h$>$}\par
{\tt \#include \char`\"{}mysock.h\char`\"{}}\par
{\tt \#include \char`\"{}vtp.h\char`\"{}}\par
{\tt \#include \char`\"{}server.h\char`\"{}}\par
\subsection*{Functions}
\begin{CompactItemize}
\item 
void $\ast$ {\bf vtp\_\-rtcp\_\-proc} (void $\ast$arg)
\item 
void $\ast$ {\bf vtp\_\-rtp\_\-proc} (void $\ast$arg)
\item 
int {\bf init\_\-server\_\-threads} ({\bf vtp\_\-rtcp\_\-init\_\-t} $\ast$rtcp\_\-init, {\bf vtp\_\-rtp\_\-init\_\-t} $\ast$rtp\_\-init)
\item 
int {\bf vtp\_\-run\_\-server} ({\bf vtp\_\-options\_\-t} $\ast$options)
\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
int {\bf RUN\_\-THREAD} = 1
\item 
FILE $\ast$ {\bf output\_\-file} = NULL
\item 
int {\bf ctrl\_\-listen\_\-sock} = -1 {\bf ctrl\_\-connect\_\-sock} = -1
\item 
int {\bf data\_\-sock} = -1
\item 
int {\bf yes} = 1
\item 
sockaddr\_\-in ctrl\_\-local\_\-addr {\bf ctrl\_\-remote\_\-addr}
\item 
sockaddr\_\-in data\_\-local\_\-addr {\bf data\_\-remote\_\-addr}
\item 
u\_\-int8\_\-t {\bf ctrl\_\-rcv\_\-buf} [MAX\_\-RCV\_\-BUF]
\item 
u\_\-int8\_\-t {\bf ctrl\_\-snd\_\-buf} [MAX\_\-SND\_\-BUF]
\item 
u\_\-int8\_\-t {\bf data\_\-rcv\_\-buf} [MAX\_\-RCV\_\-BUF]
\item 
u\_\-int8\_\-t {\bf data\_\-snd\_\-buf} [MAX\_\-SND\_\-BUF]
\item 
u\_\-int8\_\-t {\bf data\_\-buf} [MAX\_\-DATA\_\-BUF]
\item 
{\bf vtp\_\-ctrl\_\-hdr\_\-t} {\bf ctrl\_\-packet}
\item 
{\bf vtp\_\-state\_\-t} {\bf curr\_\-server\_\-state} = INIT
\end{CompactItemize}


\subsection{Function Documentation}
\index{server.c@{server.c}!init_server_threads@{init\_\-server\_\-threads}}
\index{init_server_threads@{init\_\-server\_\-threads}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int init\_\-server\_\-threads ({\bf vtp\_\-rtcp\_\-init\_\-t} $\ast$ {\em rtcp\_\-init}, {\bf vtp\_\-rtp\_\-init\_\-t} $\ast$ {\em rtp\_\-init})}\label{server_8c_a16}


\index{server.c@{server.c}!vtp_rtcp_proc@{vtp\_\-rtcp\_\-proc}}
\index{vtp_rtcp_proc@{vtp\_\-rtcp\_\-proc}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ vtp\_\-rtcp\_\-proc (void $\ast$ {\em arg})\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a14}


\index{server.c@{server.c}!vtp_rtp_proc@{vtp\_\-rtp\_\-proc}}
\index{vtp_rtp_proc@{vtp\_\-rtp\_\-proc}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ vtp\_\-rtp\_\-proc (void $\ast$ {\em arg})\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a15}


\index{server.c@{server.c}!vtp_run_server@{vtp\_\-run\_\-server}}
\index{vtp_run_server@{vtp\_\-run\_\-server}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int vtp\_\-run\_\-server ({\bf vtp\_\-options\_\-t} $\ast$ {\em options})}\label{server_8c_a17}




\subsection{Variable Documentation}
\index{server.c@{server.c}!ctrl_listen_sock@{ctrl\_\-listen\_\-sock}}
\index{ctrl_listen_sock@{ctrl\_\-listen\_\-sock}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf ctrl\_\-listen\_\-sock} = -1 {\bf ctrl\_\-connect\_\-sock} = -1\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a2}


\index{server.c@{server.c}!ctrl_packet@{ctrl\_\-packet}}
\index{ctrl_packet@{ctrl\_\-packet}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf vtp\_\-ctrl\_\-hdr\_\-t} {\bf ctrl\_\-packet}\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a12}


\index{server.c@{server.c}!ctrl_rcv_buf@{ctrl\_\-rcv\_\-buf}}
\index{ctrl_rcv_buf@{ctrl\_\-rcv\_\-buf}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}u\_\-int8\_\-t {\bf ctrl\_\-rcv\_\-buf}[MAX\_\-RCV\_\-BUF]\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a7}


\index{server.c@{server.c}!ctrl_remote_addr@{ctrl\_\-remote\_\-addr}}
\index{ctrl_remote_addr@{ctrl\_\-remote\_\-addr}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct sockaddr\_\-in ctrl\_\-local\_\-addr {\bf ctrl\_\-remote\_\-addr}\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a5}


\index{server.c@{server.c}!ctrl_snd_buf@{ctrl\_\-snd\_\-buf}}
\index{ctrl_snd_buf@{ctrl\_\-snd\_\-buf}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}u\_\-int8\_\-t {\bf ctrl\_\-snd\_\-buf}[MAX\_\-SND\_\-BUF]\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a8}


\index{server.c@{server.c}!curr_server_state@{curr\_\-server\_\-state}}
\index{curr_server_state@{curr\_\-server\_\-state}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf vtp\_\-state\_\-t} {\bf curr\_\-server\_\-state} = INIT}\label{server_8c_a13}


\index{server.c@{server.c}!data_buf@{data\_\-buf}}
\index{data_buf@{data\_\-buf}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}u\_\-int8\_\-t {\bf data\_\-buf}[MAX\_\-DATA\_\-BUF]\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a11}


\index{server.c@{server.c}!data_rcv_buf@{data\_\-rcv\_\-buf}}
\index{data_rcv_buf@{data\_\-rcv\_\-buf}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}u\_\-int8\_\-t {\bf data\_\-rcv\_\-buf}[MAX\_\-RCV\_\-BUF]\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a9}


\index{server.c@{server.c}!data_remote_addr@{data\_\-remote\_\-addr}}
\index{data_remote_addr@{data\_\-remote\_\-addr}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct sockaddr\_\-in data\_\-local\_\-addr {\bf data\_\-remote\_\-addr}\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a6}


\index{server.c@{server.c}!data_snd_buf@{data\_\-snd\_\-buf}}
\index{data_snd_buf@{data\_\-snd\_\-buf}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}u\_\-int8\_\-t {\bf data\_\-snd\_\-buf}[MAX\_\-SND\_\-BUF]\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a10}


\index{server.c@{server.c}!data_sock@{data\_\-sock}}
\index{data_sock@{data\_\-sock}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf data\_\-sock} = -1\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a3}


\index{server.c@{server.c}!output_file@{output\_\-file}}
\index{output_file@{output\_\-file}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}FILE$\ast$ {\bf output\_\-file} = NULL\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a1}


\index{server.c@{server.c}!RUN_THREAD@{RUN\_\-THREAD}}
\index{RUN_THREAD@{RUN\_\-THREAD}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf RUN\_\-THREAD} = 1\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a0}


\index{server.c@{server.c}!yes@{yes}}
\index{yes@{yes}!server.c@{server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf yes} = 1\hspace{0.3cm}{\tt  [static]}}\label{server_8c_a4}


