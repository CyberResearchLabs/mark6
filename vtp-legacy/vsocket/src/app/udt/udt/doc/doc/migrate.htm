<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>UDT Reference</title>
</head>

<body>

<table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" width="100%" id="AutoNumber1" bgcolor="#99CCFF" bordercolor="#99CCFF">
  <tr>
    <td width="100%"><font face="Verdana" size="2"><i>&nbsp;UDT Migration Guide</i></font></td>
  </tr>
</table>
<h1><font face="Verdana" size="4">Migration Guide</font></h1>
<p><font face="Verdana" size="2">What if the current version cannot be compiled 
or run on my systems? This section will give you some guidelines for porting UDT to other operating 
systems, architectures, or even other languages.</font></p>

<h4><font face="Verdana" size="2">Porting to other Operating Systems </font>
</h4>

<p><font face="Verdana" size="2">Operating system issues often involves 
different name/semantics of system calls. The current version should have no 
problem on most of the *nix or BSD systems. Problems will arise when porting to 
Windows. </font></p>
<p><font face="Verdana" size="2">First of all, it is necessary to replace all 
socket API in <font color="#808000"><i>channel.cpp</i></font> and
<font color="#808000"><i>sabul.h</i></font> with the proper API of the target 
system. Note that the same API may have different semantics on different systems. 
For example, the <u>SO_RCVTIMEO</u> option for <u>setsocketopt</u> has different 
semantics on Linux and BSD, and it is not even available on UNIX, 
but this is a very important system call for UDT.</font></p>
<p><font face="Verdana" size="2">Secondly, the thread mechanism need to be 
ported. The current implementation uses <u>Pthread</u>, which is not available 
on some other systems, such as Windows.</font></p>
<p><font face="Verdana" size="2">Finally, you should implement
<font color="#808000"><i>getCPUFrequency</i></font> method in <i>
<font color="#808000">common.cpp</font></i> for different systems. This is 
generally not difficult. There is usually a system call or machine 
instruction on most systems for this. If it is impossible or hard to read the CPU 
frequency, the method should return 1. In this case, the <font color="#808000">
<i>rdtsc</i></font> method should return the current time in microseconds.</font></p>
<h4><font face="Verdana" size="2">Porting to other Architectures</font></h4>
<p><font face="Verdana" size="2">Major problem involving in architecture issues 
is the different type length, which may also be caused by different operating 
systems. UDT uses 2 kinds of fixed length type, 32-bit integer and 64-bit 
integer by defining <i><font color="#808000">__int32</font></i> and <i>
<font color="#808000">__int64</font></i>. You should redefine them at the 
beginning of <i><font color="#808000">sabul.h</font></i> if necessary. The part of 
codes are shown below:</font></p>
<table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" width="100%" id="AutoNumber2" bgcolor="#C0C0C0" bordercolor="#C0C0C0">
  <tr>
    <td width="100%">
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">// Explicitly define 32-bit and 64-bit 
    numbers<br>
    #ifndef WIN32<br>
&nbsp;&nbsp; #define __int32 int<br>
&nbsp;&nbsp; #define __int64 long long<br>
    #endif</font></td>
  </tr>
</table>
<p><font face="Verdana" size="2">Note that these types are SIGNED integers.</font></p>
<h4><font face="Verdana" size="2">Porting to other Compilers</font></h4>
<p><font face="Verdana" size="2">It is tried hard to avoid any fancy features 
not compliant with C++ standard in the implementation. There should be no 
problem to compile UDT using other compilers than <u>gcc</u> as long as the 
platform issues are not involved. </font></p>
<p><font face="Verdana" size="2">However, the <i><font color="#808000">Makefile</font></i> 
may not work. Modify them according the instruction of the target compilers.</font></p>
<h4><font face="Verdana" size="2">Porting to other Languages</font></h4>
<p><font face="Verdana" size="2">This is not insane. Some people may want to 
implement it in kernel level with C, and some may want to have a Java version 
UDT.</font></p>
<p><font face="Verdana" size="2">Please refer to 
the protocol specification, the C++ source codes, and the source codes comments. Limited 
help may be available from the author.</font></p>

</body>

</html>
