<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>UDT Reference</title>
</head>

<body>

<table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" width="100%" id="AutoNumber1" bgcolor="#99CCFF" bordercolor="#99CCFF">
  <tr>
    <td width="100%"><font face="Verdana" size="2"><i>&nbsp;UDT Tutorial: 
    Transfer </i></font><i><font face="Verdana" size="2">Files</font></i></td>
  </tr>
</table>
<h1><font face="Verdana" size="4">Transfer Files</font></h1>
<p><font face="Verdana" size="2">File transfer is trivial in UDT. Note 
that a sent file is not necessarily received by <a href="recvfile.htm">recvfile</a>, 
and vice versa.</font></p>
<p><font face="Verdana" size="2">Files can be sent or received at any time once the 
UDT connection is established. There is NO non-blocking mode for file sending or 
receiving, no matter how the <a href="opt.htm">UDT_SNDSYN</a> and
<a href="opt.htm">UDT_RCVSYN</a> are set.</font></p>
<p><font face="Verdana" size="2">In UDT, file transfer uses C++ <u>fstream</u> 
standard class to handle the files. The following examples show the usage of
<a href="sendfile.htm">sendfile</a> and <a href="recvfile.htm">recvfile</a>.</font></p>
<h4><font face="Verdana" size="2">Example: send a file using UDT</font></h4>
<table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" width="100%" id="AutoNumber2" bgcolor="#C0C0C0" bordercolor="#C0C0C0">
  <tr>
    <td width="100%">
    <p style="margin-top: 0; margin-bottom: 0"><font size="1" face="Courier New">
    CUDT sender;</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">...</font></p>
    <p style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
    <p style="margin-top: 0; margin-bottom: 0"><font size="1" face="Courier New">
    ifstream&amp; ifs(&quot;largefile.dat&quot;);</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">ifs.seekg(0, ios::end);</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">int size = ifs.tellg();</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">ifs.seekg(0, ios::beg);</font></p>
    <p style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">try</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">{</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">&nbsp;&nbsp; sender-&gt;sendfile(ifs, 0, 
    size);</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">}</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">catch (CUDTException e)</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">{</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">&nbsp;&nbsp; // process error...</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">}</font></td>
  </tr>
</table>
<h4><font face="Verdana" size="2">Example: receive data into a file using UDT</font></h4>
<table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" width="100%" id="AutoNumber3" bgcolor="#C0C0C0" bordercolor="#C0C0C0">
  <tr>
    <td width="100%">
    <p style="margin-top: 0; margin-bottom: 0"><font size="1" face="Courier New">
    CUDT recver;</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">...</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    &nbsp;</p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">ofstream&amp; ofs(&quot;largefile.dat&quot;);</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    &nbsp;</p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">try</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">{</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">&nbsp;&nbsp; recver-&gt;recvfile(ofs, 0, 
    size);</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">}</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">catch (CUDTException e)</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">{</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">&nbsp;&nbsp; // process error...</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">}</font></td>
  </tr>
</table>

</body>

</html>
