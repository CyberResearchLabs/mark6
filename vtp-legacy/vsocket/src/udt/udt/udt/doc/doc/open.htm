<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>UDT Reference</title>
</head>

<body>

<table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" width="100%" id="AutoNumber1" bgcolor="#99CCFF" bordercolor="#99CCFF">
  <tr>
    <td width="100%"><font face="Verdana" size="2"><i>&nbsp;UDT Reference: CUDT 
    Methods</i></font></td>
  </tr>
</table>
<h1><font size="4" face="Verdana">open</font></h1>
<p><font face="Verdana" size="2">The <b>open</b> method initializes a UDT entity 
with an attempt to use the given port number and/or IP address .</font></p>
<table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" width="100%" id="AutoNumber2" bgcolor="#C0C0C0" bordercolor="#C0C0C0">
  <tr>
    <td width="100%"><font size="1" face="Courier New">int open(<br>
&nbsp;&nbsp; const int&amp; <i><font color="#FFFFFF">port</font></i> = 0<br>
    );</font><p style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">int open(<br>
&nbsp;&nbsp; const char* <font color="#FFFFFF"><i>ip</i></font>,</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">&nbsp;&nbsp; const int&amp;
    <font color="#FFFFFF"><i>port</i></font> = 0<br>
    );</font></td>
  </tr>
</table>
<h4><font face="Verdana" size="2">Parameters</font></h4>
<dl>
  <dt><font face="Verdana" size="2"><i>port</i> </font></dt>
  <dd><font face="Verdana" size="2">[in] The port number that the UDT entity is 
  expected to be bound to. </font></dd>
  <dt>&nbsp;</dt>
  <dt><font face="Verdana" size="2"><i>ip</i> </font></dt>
  <dd><font face="Verdana" size="2">[in] The IP address that the UDT entity is 
  expected to be bound to on a multi-homed host. </font></dd>
</dl>
<h4><font face="Verdana" size="2">Return Values</font></h4>
<p><font face="Verdana" size="2">If no error occurs, <a><b>open</b></a> returns 
the actual port number that the UDT entity is using.</font></p>
<h4><font face="Verdana" size="2">Exceptions</font></h4>
<p><font face="Verdana" size="2">A <a href="cudtexception.htm">CUDTException</a> exception is threw out 
under two kinds of situations. One is that the assigned <i>port</i> number is not 
available but the application has set the <a href="opt.htm">UDT_PCH</a> 
option as <font color="#008000">false</font>. The other is that the assigned IP 
address does not exist.</font></p>
<p><font face="Verdana" size="2">The default <i>port</i> number is
<font color="#008000">0</font>, which means UDT can choose any available port 
number.</font></p>
<H4><font face="Verdana" size="2">Description</font></H4>
<P><font face="Verdana" size="2">The 
<A><b>open</b></A> method initializes the system variables related to sequence 
numbers and the protocol data structures. Especially, the <b>open</b> method <u>
bind</u>s the UDP socket to an IP address and a port number. If the second 
format of <b>open</b> is called, UDT<i> </i>tries to bind to address<i> ip, </i>
otherwise it uses the first address found by <u>getaddrinfo</u>.</font></P>
<P><font face="Verdana" size="2">Port number may not always be cared of by 
applications, especially at the client side. This is left as the default option 
in UDT. To bind UDT entity to a fixed port number, the application MUST first 
set the <a href="opt.htm">UDT_PCH</a> as <font color="#008000">false</font>, 
then uses a loop to <b>open</b> a UDT entity until no exception is threw out. 
Refer to the example in this page.</font></P>
<P><font face="Verdana" size="2">The returned port number should be used for a 
peer side to <a href="connect.htm">connect</a> to. Similarly, if the IP address 
is assigned, the peer side MUST also <a href="connect.htm">connect</a> to the <i>
ip</i> address also.</font></P>
<H4><font face="Verdana" size="2">Examples</font></H4>
<P>
<P><font face="Verdana" size="2">The following codes show how to bind a server 
UDT entity to given IP address and port number:</font></P>
<table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" width="100%" id="AutoNumber2" bgcolor="#C0C0C0" bordercolor="#C0C0C0">
  <tr>
    <td width="100%">
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">CUDT udt;</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font size="1" face="Courier New">char ip = &quot;206.220.241.13&quot;;</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">int port = 7001;</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">bool opened = false;</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">do</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">{</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">&nbsp;&nbsp; try</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">&nbsp;&nbsp; {</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
    udt.open(ip, port);</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
    opened = true; </font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">&nbsp;&nbsp; }</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">&nbsp;&nbsp; catch (CUDTException e)</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">&nbsp;&nbsp; {</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 
    Break if the failure is NOT caused by unavailable port number</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">&nbsp;&nbsp; }</font></p>
    <p style="margin-top: 0; margin-bottom: 0">
    <font face="Courier New" size="1">} while (!opened);</font></td>
  </tr>
</table>
<p></p>
<p></p>
<H4><font face="Verdana" size="2">See Also</font></H4>
<P><font face="Verdana" size="2"><b>
<a href="listen.htm">listen</a>, <a href="connect.htm">connect</a>,</b> <b>
<a href="opt.htm">setOpt</a></b>,
<b><a href="opt.htm">getOpt</a></b></font></P>

</body>

</html>